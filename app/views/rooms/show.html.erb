<% content_for :title, "#{@room.name} | PodLoko iPod Control" %>
<%= javascript_tag :defer => 'defer' do %>
  var pusher = new Pusher('58b48fb1e1b958165a91');
  var channel = pusher.subscribe('willowtree');
  channel.bind('stop', function(data) {
    alert(data);
  });
  $(document).ready(function() 
    { 
        $("#library").tablesorter( {sortList: [[0,0], [1,0]]} ); 
    } 
  );
<% end %>
<h1>Room <%= @room.name %></h1>
<ul class="controls">
  <%= link_to request_library_update_room_path(@room) do %>
    <li>Update Library</li>
  <% end %>
  <%= link_to stop_room_path(@room) do %>
    <li>Stop Playback</li>
  <% end %>
</ul>
<table id="library" class="tablesorter">
<thead>
  <tr>
    <th>Artist</th>
    <th>Album</th>
    <th>Name</th>
    <th>Time</th>
  </tr>
</thead>
<tbody id="library-body">
  <% @room_tracks.each do |thash| %>
    <tr>
      <td><%= thash["artist"] %></td>
      <td><%= thash["album"] %></td>
      <td><%= thash["title"] %></td>
      <td><%= thash["duration"] %></td>
    </tr>
  <% end %>
</tbody>
</table>
